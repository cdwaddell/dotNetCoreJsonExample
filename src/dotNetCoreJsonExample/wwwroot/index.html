<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Med IQ Test Site</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />

	<!--[if lt IE 9]>
		<script type="text/javascript" src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		<script type="text/javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>
<body>
	<div class="page-container">
		<!-- top navbar -->
		<div class="navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target=".sidebar-nav">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
			</div>
		</div>

		<div class="container">
			<div class="row row-offcanvas row-offcanvas-left">
				<div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
					<ul class="nav" data-bind="foreach: Items">
						<li data-bind="css: { active: $parent.SelectedItem.QuestionId() == QuestionId() }">
							<a data-bind="click: $parent.ChangeItem, attr: { href: '#' + QuestionId() }">
								<span data-bind="text: QuestionHeading"></span>
								<i data-bind="dragZone: { name: 'items' }" class="glyphicon glyphicon-file"></i>
							</a>
						</li>
					</ul>
				</div>
				<div class="col-xs-12 col-sm-9">
					<div class="row">
						<div class="col-xs-12">
							<div class="drop">
								Drop <i class="glyphicon glyphicon-file"></i> Item Here.
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12" data-bind="with: SelectedItem">
							<h1 data-bind="text: QuestionHeading"></h1>
							<div data-bind="html: QuestionText"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.4.1/knockout.mapping.min.js"></script>
	<script type="text/javascript" src="Scripts/knockout.dragdrop.js"></script>
	<script type="text/javascript">
		$(document).ready(function () {
			var viewModel = function (data) {
				var self = this;

				self.Items = ko.mapping.fromJS(data);
				self.ChangeItem = function (item) {
					ko.mapping.fromJS(item, self.SelectedItem);
					$('.row-offcanvas').removeClass('active');
				};
				self.SelectedItem = ko.mapping.fromJS(ko.mapping.toJS(self.Items()[0]));
				ko.applyBindings(self);

				return self;
			};

			$('[data-toggle=offcanvas]').click(function () {
				$('.row-offcanvas').toggleClass('active');
			});
			$.get("questions.json", function (data) {
				var vm = new viewModel(data);
			});
		});
	</script>
</body>
</html>